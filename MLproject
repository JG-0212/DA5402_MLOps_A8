name: a8

python_env: python_env.yaml

entry_points:

  serve_model:
    parameters:
      model_version: {type: string, default: '1'}
    command: >
      mlflow models serve -m "models:/cnn_text_identifier/{model_version}" --host 127.0.0.1 --port 8000 

  poster:
    command: >
      curl -s -X POST http://localhost:8000/invocations -H 'Content-Type: application/json' -d @project/text_image.json -o project/prediction.json

  inferrer:
    parameters:
      model_version: {type: string, default: '1'}
    command: "python3 project/text_identifier.py {model_version}"